{
	"Objects" : 
	[
		{
			"Type" : "nap::RenderWindow",
			"mID" : "Window",
			"Width" : 1280,
			"Height" : 720,
			"Title" : "videomodulation",
			"Sync" : true
		},

		{
            "Type": "nap::Texture2D",
            "mID": "VideoDepthTexture",
            "Parameters": 
            {
                "MinFilter": "Linear",
                "MaxFilter": "Linear",
                "WrapVertical": "ClampToEdge",
                "WrapHorizontal": "ClampToEdge",
                "MaxLodLevel": 20
            },
            "Usage": "Static",
            "Width":  1920,
            "Height": 1080,
            "Format": "Depth"
        },

        {
            "Type": "nap::Texture2D",
            "mID": "VideoColorTexture",
            "Parameters": 
            {
                "MinFilter": "Linear",
                "MaxFilter": "Linear",
                "WrapVertical": "ClampToEdge",
                "WrapHorizontal": "ClampToEdge",
                "MaxLodLevel": 20
            },
            "Usage": "DynamicRead",
            "Width": 1920,
            "Height": 1080,
            "Format": "RGB8"
        },
		
        {
            "Type": "nap::RenderTarget",
            "mID": "VideoRenderTarget",
            "mColorTexture": "VideoColorTexture",
            "mDepthTexture": "VideoDepthTexture",
            "mClearColor": 
            {
                "x": 1.0,
                "y": 0.0,
                "z": 0.0,
                "w": 1.0
            }
        },

		{
			"Type" : "nap::PlaneMesh",
			"mID": "PlaneMesh"
		},

		{
			"Type" : "nap::PlaneMesh",
			"mID" : "VideoMesh",
			"Size" :
			{
				"x" : 1920,
				"y" : 1080
			},
			"Position" :
			{
				"x" : 960,
				"y" : 540
			}
		},

		{
			"mID" : "OctahedronMesh",
			"Type" : "nap::VideoMeshFromFile",
			"Path" : "data/videomodulation/octahedron.mesh"
		},

		{
			"mID" : "IsocahedronMesh",
			"Type" : "nap::VideoMeshFromFile",
			"Path" : "data/videomodulation/isocahedron.mesh"
		},

		{
			"mID" : "SphereMesh",
			"Type" : "nap::VideoMeshFromFile",
			"Path" : "data/videomodulation/sphere.mesh"
		},

		{
			"mID" : "CubeMesh",
			"Type" : "nap::VideoMeshFromFile",
			"Path" : "data/videomodulation/cube.mesh"
		},
		
		{
			"Type" : "nap::Shader",
			"mID": "VideoShader",
			"mVertShader": "shaders/videomodulation/video.vert",
			"mFragShader": "shaders/videomodulation/video.frag"
		},

		{
			"Type" : "nap::Shader",
			"mID": "BackgroundShader",
			"mVertShader": "shaders/videomodulation/background.vert",
			"mFragShader": "shaders/videomodulation/background.frag"
		},

		{
			"Type" : "nap::Shader",
			"mID": "DisplacementShader",
			"mVertShader": "shaders/videomodulation/displacement.vert",
			"mFragShader": "shaders/videomodulation/displacement.frag"
		},
		
		{
			"Type" : "nap::Video",
			"mID": "StreakVideo",
			"Path": "data/videomodulation/streak.mp4"
		},

		{
			"Type" : "nap::Video",
			"mID": "FlareVideo",
			"Path": "data/videomodulation/flare.mov"
		},

		{
			"Type" : "nap::Video",
			"mID": "SnowVideo",
			"Path": "data/videomodulation/snow.mp4"
		},
		
		{
			"Type" : "nap::Material",
			"mID": "VideoMaterial",
			"Shader": "VideoShader",
			"VertexAttributeBindings" : [
				{
					"MeshAttributeID": "Position",
					"ShaderAttributeID": "in_Position"
				},
				{
					"MeshAttributeID": "UV0",
					"ShaderAttributeID": "in_UV0"
				}
			]
		},

		{
			"Type" : "nap::Material",
			"mID": "BackgroundMaterial",
			"Shader": "BackgroundShader",
			"VertexAttributeBindings" : 
			[
				{
					"MeshAttributeID": "Position",
					"ShaderAttributeID": "in_Position"
				},
				{
					"MeshAttributeID": "UV0",
					"ShaderAttributeID": "in_UV0"
				}
			],
			"Uniforms" : 
			[
				{
					"Type" : "nap::UniformTexture2D",
					"Name" : "videoTexture",
					"Texture" : "VideoColorTexture"
				}
			]	
		},

		{
			"Type" : "nap::Material",
			"mID": "DisplacementMaterial",
			"Shader": "DisplacementShader",
			"VertexAttributeBindings" : 
			[
				{
					"MeshAttributeID": "Position",
					"ShaderAttributeID": "in_Position"
				},
				{
					"MeshAttributeID": "UV0",
					"ShaderAttributeID": "in_UV0"
				},
				{
					"MeshAttributeID": "Normal",
					"ShaderAttributeID" : "in_Normal"
				},
				{
					"MeshAttributeID" : "UVCenter",
					"ShaderAttributeID" : "in_CenterUV"
				},
				{
					"MeshAttributeID" : "DisplacementDirection",
					"ShaderAttributeID" : "in_DisplacementDirection"
				},
				{
					"MeshAttributeID" : "Color0",
					"ShaderAttributeID" : "in_Color"
				}
			],
			"Uniforms" : 
			[
				{
					"Type" : "nap::UniformTexture2D",
					"Name" : "videoTexture",
					"Texture" : "VideoColorTexture"
				}
			]	
		},
		
		{
			"Type" : "nap::Scene",
			"mID": "Scene",		
			"Entities" : 
			[
				{
					"Entity" : "OrthoCameraEntity"
				},
				{
					"Entity" : "PerspCameraEntity"
				},
				{
					"Entity" : "VideoEntity"
				},
				{
					"Entity" : "BackgroundEntity"
				},
				{
					"Entity" : "DisplacementEntity"
				}
			]
		},

		{
			"Type" : "nap::Entity",
			"mID": "OrthoCameraEntity",
			
			"Components" : 
			[
				{
					"Type" : "nap::OrthoCameraComponent",
					"Properties": {
						"NearClippingPlane" : 0.1,
						"FarClippingPlane" : 10000.0
					}
				},
				{
					"Type" : "nap::TransformComponent",
					"Properties": {
						"Translate": {
							"x": 0.0,
							"y": 0.0,
							"z": 1.0
						},
						"Rotate": {
							"x": 0.0,
							"y": 0.0,
							"z": 0.0,
							"w": 1.0
						},
						"Scale": {
							"x": 1.0,
							"y": 1.0,
							"z": 1.0
						},
						"UniformScale": 1.0						
					}
				}
			]
		},

		{
			"Type" : "nap::Entity",
			"mID": "PerspCameraEntity",
			
			"Components" : 
			[
				{
					"Type" : "nap::PerspCameraComponent",
					"mID" : "PerspCameraComponent",
					"Properties": 
					{
						"NearClippingPlane" : 0.1,
						"FarClippingPlane" : 10000.0,
						"FieldOfView" : 45
					}
				},
				{
					"Type" : "nap::TransformComponent",
					"Properties": 
					{
						"Translate": 
						{
							"x": 0.0,
							"y": 0.0,
							"z": 5.0
						},
						"Rotate": 
						{
							"x": 0.0,
							"y": 0.0,
							"z": 0.0
						},
						"Scale": 
						{
							"x": 1.0,
							"y": 1.0,
							"z": 1.0
						},
						"UniformScale": 1.0						
					}
				},
				{
                    "Type": "nap::KeyInputComponent",
                    "mID": "nap::KeyInputComponent"
                },
                {
                    "Type": "nap::PointerInputComponent",
                    "mID": "nap::PointerInputComponent"
                },
				{
                    "Type": "nap::OrbitController",
                    "mID": "nap::OrbitController",
                    "MovementSpeed": 0.033,
                    "RotateSpeed": 0.0033,
                    "PerspCameraComponent": "PerspCameraComponent"
                }
			]
		},

		{
			"Type" : "nap::Entity",
			"mID": "VideoEntity",
			
			"Components" : 
			[
				{
					"Type" : "nap::SelectVideoComponent",
					"Index" : 1,
					"Videos" :
					[
						"StreakVideo",
						"SnowVideo",
						"FlareVideo"
					]
				},
				{
					"Type" : "nap::RenderableMeshComponent",
					"Mesh" : "VideoMesh",
					"MaterialInstance" : 
					{
						"Material": "VideoMaterial"
					}
				},
				{
					"Type" : "nap::TransformComponent"
				}
			]	
		},

		{
			"Type" : "nap::Entity",
			"mID": "BackgroundEntity",
			
			"Components" : 
			[
				{
					"Type" : "nap::RenderableMeshComponent",
					"Mesh" : "PlaneMesh",
					"MaterialInstance" : 
					{
						"Material": "BackgroundMaterial",
						"DepthMode": "ReadOnly"
					}
				},
				{
					"Type" : "nap::TransformComponent"
				}
			]	
		},

		{
			"Type" : "nap::Entity",
			"mID": "DisplacementEntity",
			
			"Components" : 
			[
				{
					"Type" : "nap::SelectVideoMeshComponent",
					"Index": 1,
					"Meshes" :
					[
						"SphereMesh",
						"OctahedronMesh",
						"IsocahedronMesh",
						"CubeMesh"
					]
				},
				{
					"Type" : "nap::RenderableMeshComponent",
					"Mesh" : "SphereMesh",
					"MaterialInstance" : 
					{
						"Material": "DisplacementMaterial"
					}
				},
				{
					"Type" : "nap::TransformComponent",
					"Properties": {
						"Translate": {
							"x": 0.0,
							"y": 0.0,
							"z": 0.0
						},
						"Rotate": {
							"x": 0.0,
							"y": 0.0,
							"z": 0.0,
							"w": 1.0
						},
						"Scale": {
							"x": 1.0,
							"y": 1.0,
							"z": 1.0
						},
						"UniformScale": 1.0					
					}
				},
				{
					"Type" : "nap::RotateComponent",
					"Properties": {
						"Axis": {
							"x": 0.0,
							"y": 1.0,
							"z": 0.0
						},
						"Speed": 0.05,
						"Offset": 0.2
					}
				}
			]	
		}
	]
} 